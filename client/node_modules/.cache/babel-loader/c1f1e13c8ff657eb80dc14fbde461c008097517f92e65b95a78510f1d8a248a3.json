{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nvar rmoas_types_1 = require(\"oas/dist/rmoas.types\");\nfunction harValue(type, value) {\n  if (!value.value) return undefined;\n  return {\n    type: type,\n    value: value\n  };\n}\nfunction configureSecurity(apiDefinition, values, scheme) {\n  var _a, _b;\n  if (!scheme) return undefined;\n  if (Object.keys(values || {}).length === 0) return undefined;\n  if (!apiDefinition.components.securitySchemes[scheme]) return undefined;\n  var security = apiDefinition.components.securitySchemes[scheme];\n  if ((0, rmoas_types_1.isRef)(security)) {\n    return undefined;\n  } else if (!values[scheme]) {\n    // If we don't have any data for this auth scheme then we shouldn't add it.\n    return false;\n  }\n  if (security.type === 'http') {\n    if (security.scheme === 'basic') {\n      var auth = values[scheme];\n      if (typeof auth !== 'object') return false;\n      if (!auth.user && !auth.pass) return false;\n      var user = (_a = auth.user) !== null && _a !== void 0 ? _a : null;\n      if (user === null || user.length === 0) {\n        user = '';\n      }\n      var pass = (_b = auth.pass) !== null && _b !== void 0 ? _b : null;\n      if (pass === null || pass.length === 0) {\n        pass = '';\n      }\n      return harValue('headers', {\n        name: 'authorization',\n        value: \"Basic \".concat(Buffer.from(\"\".concat(user, \":\").concat(pass)).toString('base64'))\n      });\n    } else if (security.scheme === 'bearer') {\n      return harValue('headers', {\n        name: 'authorization',\n        value: \"Bearer \".concat(values[scheme])\n      });\n    }\n  }\n  if (security.type === 'apiKey') {\n    if (security[\"in\"] === 'query') {\n      return harValue('queryString', {\n        name: security.name,\n        value: String(values[scheme])\n      });\n    } else if (security[\"in\"] === 'header') {\n      var header = {\n        name: security.name,\n        value: String(values[scheme])\n      };\n      if (security['x-bearer-format']) {\n        // Uppercase: token -> Token\n        var bearerFormat = security['x-bearer-format'].charAt(0).toUpperCase() + security['x-bearer-format'].slice(1);\n        header.name = security.name;\n        header.value = \"\".concat(bearerFormat, \" \").concat(header.value);\n      }\n      return harValue('headers', header);\n    } else if (security[\"in\"] === 'cookie') {\n      return harValue('cookies', {\n        name: security.name,\n        value: String(values[scheme])\n      });\n    }\n  }\n  if (security.type === 'oauth2') {\n    return harValue('headers', {\n      name: 'authorization',\n      value: \"Bearer \".concat(values[scheme])\n    });\n  }\n  return undefined;\n}\nexports[\"default\"] = configureSecurity;","map":{"version":3,"names":["exports","__esModule","rmoas_types_1","require","harValue","type","value","undefined","configureSecurity","apiDefinition","values","scheme","_a","_b","Object","keys","length","components","securitySchemes","security","isRef","auth","user","pass","name","concat","Buffer","from","toString","String","header","bearerFormat","charAt","toUpperCase","slice"],"sources":["/Users/pranavsrinivasan/Documents/VSCode/aividgen/client/.api/apis/aivideoapi/node_modules/@readme/oas-to-har/dist/lib/configure-security.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar rmoas_types_1 = require(\"oas/dist/rmoas.types\");\nfunction harValue(type, value) {\n    if (!value.value)\n        return undefined;\n    return { type: type, value: value };\n}\nfunction configureSecurity(apiDefinition, values, scheme) {\n    var _a, _b;\n    if (!scheme)\n        return undefined;\n    if (Object.keys(values || {}).length === 0)\n        return undefined;\n    if (!apiDefinition.components.securitySchemes[scheme])\n        return undefined;\n    var security = apiDefinition.components.securitySchemes[scheme];\n    if ((0, rmoas_types_1.isRef)(security)) {\n        return undefined;\n    }\n    else if (!values[scheme]) {\n        // If we don't have any data for this auth scheme then we shouldn't add it.\n        return false;\n    }\n    if (security.type === 'http') {\n        if (security.scheme === 'basic') {\n            var auth = values[scheme];\n            if (typeof auth !== 'object')\n                return false;\n            if (!auth.user && !auth.pass)\n                return false;\n            var user = (_a = auth.user) !== null && _a !== void 0 ? _a : null;\n            if (user === null || user.length === 0) {\n                user = '';\n            }\n            var pass = (_b = auth.pass) !== null && _b !== void 0 ? _b : null;\n            if (pass === null || pass.length === 0) {\n                pass = '';\n            }\n            return harValue('headers', {\n                name: 'authorization',\n                value: \"Basic \".concat(Buffer.from(\"\".concat(user, \":\").concat(pass)).toString('base64'))\n            });\n        }\n        else if (security.scheme === 'bearer') {\n            return harValue('headers', {\n                name: 'authorization',\n                value: \"Bearer \".concat(values[scheme])\n            });\n        }\n    }\n    if (security.type === 'apiKey') {\n        if (security[\"in\"] === 'query') {\n            return harValue('queryString', {\n                name: security.name,\n                value: String(values[scheme])\n            });\n        }\n        else if (security[\"in\"] === 'header') {\n            var header = {\n                name: security.name,\n                value: String(values[scheme])\n            };\n            if (security['x-bearer-format']) {\n                // Uppercase: token -> Token\n                var bearerFormat = security['x-bearer-format'].charAt(0).toUpperCase() + security['x-bearer-format'].slice(1);\n                header.name = security.name;\n                header.value = \"\".concat(bearerFormat, \" \").concat(header.value);\n            }\n            return harValue('headers', header);\n        }\n        else if (security[\"in\"] === 'cookie') {\n            return harValue('cookies', {\n                name: security.name,\n                value: String(values[scheme])\n            });\n        }\n    }\n    if (security.type === 'oauth2') {\n        return harValue('headers', {\n            name: 'authorization',\n            value: \"Bearer \".concat(values[scheme])\n        });\n    }\n    return undefined;\n}\nexports[\"default\"] = configureSecurity;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}