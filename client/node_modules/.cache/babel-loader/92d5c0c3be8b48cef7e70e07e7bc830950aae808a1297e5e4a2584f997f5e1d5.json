{"ast":null,"code":"// utility for whatwg streams\nexport function isAsyncIterable(object) {\n  return object[Symbol.asyncIterator] != null;\n}\nexport async function* asyncIterableFromStream(stream) {\n  const reader = stream.getReader();\n  try {\n    while (true) {\n      const {\n        done,\n        value\n      } = await reader.read();\n      if (done) {\n        return;\n      }\n      yield value;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\nexport function ensureAsyncIterable(streamLike) {\n  if (isAsyncIterable(streamLike)) {\n    return streamLike;\n  } else {\n    return asyncIterableFromStream(streamLike);\n  }\n}","map":{"version":3,"names":["isAsyncIterable","object","Symbol","asyncIterator","asyncIterableFromStream","stream","reader","getReader","done","value","read","releaseLock","ensureAsyncIterable","streamLike"],"sources":["/Users/pranavsrinivasan/Documents/VSCode/aividgen/client/node_modules/@msgpack/msgpack/src/utils/stream.ts"],"sourcesContent":["// utility for whatwg streams\n\n// The living standard of whatwg streams says\n// ReadableStream is also AsyncIterable, but\n// as of June 2019, no browser implements it.\n// See https://streams.spec.whatwg.org/ for details\nexport type ReadableStreamLike<T> = AsyncIterable<T> | ReadableStream<T>;\n\nexport function isAsyncIterable<T>(object: ReadableStreamLike<T>): object is AsyncIterable<T> {\n  return (object as any)[Symbol.asyncIterator] != null;\n}\n\nexport async function* asyncIterableFromStream<T>(stream: ReadableStream<T>): AsyncIterable<T> {\n  const reader = stream.getReader();\n\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        return;\n      }\n      yield value;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function ensureAsyncIterable<T>(streamLike: ReadableStreamLike<T>): AsyncIterable<T> {\n  if (isAsyncIterable(streamLike)) {\n    return streamLike;\n  } else {\n    return asyncIterableFromStream(streamLike);\n  }\n}\n"],"mappings":"AAAA;AAQA,OAAM,SAAUA,eAAeA,CAAIC,MAA6B;EAC9D,OAAQA,MAAc,CAACC,MAAM,CAACC,aAAa,CAAC,IAAI,IAAI;AACtD;AAEA,OAAO,gBAAgBC,uBAAuBA,CAAIC,MAAyB;EACzE,MAAMC,MAAM,GAAGD,MAAM,CAACE,SAAS,EAAE;EAEjC,IAAI;IACF,OAAO,IAAI,EAAE;MACX,MAAM;QAAEC,IAAI;QAAEC;MAAK,CAAE,GAAG,MAAMH,MAAM,CAACI,IAAI,EAAE;MAC3C,IAAIF,IAAI,EAAE;QACR;MACF;MACA,MAAMC,KAAK;IACb;EACF,CAAC,SAAS;IACRH,MAAM,CAACK,WAAW,EAAE;EACtB;AACF;AAEA,OAAM,SAAUC,mBAAmBA,CAAIC,UAAiC;EACtE,IAAIb,eAAe,CAACa,UAAU,CAAC,EAAE;IAC/B,OAAOA,UAAU;EACnB,CAAC,MAAM;IACL,OAAOT,uBAAuB,CAACS,UAAU,CAAC;EAC5C;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}