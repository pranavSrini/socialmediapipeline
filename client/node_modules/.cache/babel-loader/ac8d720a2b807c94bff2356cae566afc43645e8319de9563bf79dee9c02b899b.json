{"ast":null,"code":"// Reference counter, useful for garbage collector like functionality\n\n\"use strict\";\n\nvar d = require(\"d\"),\n  extensions = require(\"../lib/registered-extensions\"),\n  create = Object.create,\n  defineProperties = Object.defineProperties;\nextensions.refCounter = function (ignore, conf, options) {\n  var cache, postfix;\n  cache = create(null);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, function (id, length) {\n    cache[id] = length || 1;\n  });\n  conf.on(\"get\" + postfix, function (id) {\n    ++cache[id];\n  });\n  conf.on(\"delete\" + postfix, function (id) {\n    delete cache[id];\n  });\n  conf.on(\"clear\" + postfix, function () {\n    cache = {};\n  });\n  defineProperties(conf.memoized, {\n    deleteRef: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return null;\n      if (!cache[id]) return null;\n      if (! --cache[id]) {\n        conf.delete(id);\n        return true;\n      }\n      return false;\n    }),\n    getRefCount: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return 0;\n      if (!cache[id]) return 0;\n      return cache[id];\n    })\n  });\n};","map":{"version":3,"names":["d","require","extensions","create","Object","defineProperties","refCounter","ignore","conf","options","cache","postfix","async","promise","on","id","length","memoized","deleteRef","get","arguments","delete","getRefCount"],"sources":["/Users/pranavsrinivasan/Documents/VSCode/aividgen/server/.api/apis/aivideoapi/node_modules/memoizee/ext/ref-counter.js"],"sourcesContent":["// Reference counter, useful for garbage collector like functionality\n\n\"use strict\";\n\nvar d                = require(\"d\")\n  , extensions       = require(\"../lib/registered-extensions\")\n  , create           = Object.create\n  , defineProperties = Object.defineProperties;\n\nextensions.refCounter = function (ignore, conf, options) {\n\tvar cache, postfix;\n\n\tcache = create(null);\n\tpostfix =\n\t\t(options.async && extensions.async) || (options.promise && extensions.promise)\n\t\t\t? \"async\"\n\t\t\t: \"\";\n\n\tconf.on(\"set\" + postfix, function (id, length) { cache[id] = length || 1; });\n\tconf.on(\"get\" + postfix, function (id) { ++cache[id]; });\n\tconf.on(\"delete\" + postfix, function (id) { delete cache[id]; });\n\tconf.on(\"clear\" + postfix, function () { cache = {}; });\n\n\tdefineProperties(conf.memoized, {\n\t\tdeleteRef: d(function () {\n\t\t\tvar id = conf.get(arguments);\n\t\t\tif (id === null) return null;\n\t\t\tif (!cache[id]) return null;\n\t\t\tif (!--cache[id]) {\n\t\t\t\tconf.delete(id);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}),\n\t\tgetRefCount: d(function () {\n\t\t\tvar id = conf.get(arguments);\n\t\t\tif (id === null) return 0;\n\t\t\tif (!cache[id]) return 0;\n\t\t\treturn cache[id];\n\t\t}),\n\t});\n};\n"],"mappings":"AAAA;;AAEA,YAAY;;AAEZ,IAAIA,CAAC,GAAkBC,OAAO,CAAC,GAAG,CAAC;EAC/BC,UAAU,GAASD,OAAO,CAAC,8BAA8B,CAAC;EAC1DE,MAAM,GAAaC,MAAM,CAACD,MAAM;EAChCE,gBAAgB,GAAGD,MAAM,CAACC,gBAAgB;AAE9CH,UAAU,CAACI,UAAU,GAAG,UAAUC,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAE;EACxD,IAAIC,KAAK,EAAEC,OAAO;EAElBD,KAAK,GAAGP,MAAM,CAAC,IAAI,CAAC;EACpBQ,OAAO,GACLF,OAAO,CAACG,KAAK,IAAIV,UAAU,CAACU,KAAK,IAAMH,OAAO,CAACI,OAAO,IAAIX,UAAU,CAACW,OAAQ,GAC3E,OAAO,GACP,EAAE;EAENL,IAAI,CAACM,EAAE,CAAC,KAAK,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAEC,MAAM,EAAE;IAAEN,KAAK,CAACK,EAAE,CAAC,GAAGC,MAAM,IAAI,CAAC;EAAE,CAAC,CAAC;EAC5ER,IAAI,CAACM,EAAE,CAAC,KAAK,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAE;IAAE,EAAEL,KAAK,CAACK,EAAE,CAAC;EAAE,CAAC,CAAC;EACxDP,IAAI,CAACM,EAAE,CAAC,QAAQ,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAE;IAAE,OAAOL,KAAK,CAACK,EAAE,CAAC;EAAE,CAAC,CAAC;EAChEP,IAAI,CAACM,EAAE,CAAC,OAAO,GAAGH,OAAO,EAAE,YAAY;IAAED,KAAK,GAAG,CAAC,CAAC;EAAE,CAAC,CAAC;EAEvDL,gBAAgB,CAACG,IAAI,CAACS,QAAQ,EAAE;IAC/BC,SAAS,EAAElB,CAAC,CAAC,YAAY;MACxB,IAAIe,EAAE,GAAGP,IAAI,CAACW,GAAG,CAACC,SAAS,CAAC;MAC5B,IAAIL,EAAE,KAAK,IAAI,EAAE,OAAO,IAAI;MAC5B,IAAI,CAACL,KAAK,CAACK,EAAE,CAAC,EAAE,OAAO,IAAI;MAC3B,IAAI,CAAC,GAAEL,KAAK,CAACK,EAAE,CAAC,EAAE;QACjBP,IAAI,CAACa,MAAM,CAACN,EAAE,CAAC;QACf,OAAO,IAAI;MACZ;MACA,OAAO,KAAK;IACb,CAAC,CAAC;IACFO,WAAW,EAAEtB,CAAC,CAAC,YAAY;MAC1B,IAAIe,EAAE,GAAGP,IAAI,CAACW,GAAG,CAACC,SAAS,CAAC;MAC5B,IAAIL,EAAE,KAAK,IAAI,EAAE,OAAO,CAAC;MACzB,IAAI,CAACL,KAAK,CAACK,EAAE,CAAC,EAAE,OAAO,CAAC;MACxB,OAAOL,KAAK,CAACK,EAAE,CAAC;IACjB,CAAC;EACF,CAAC,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}