{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nexports.types = void 0;\nvar clone_object_1 = __importDefault(require(\"../lib/clone-object\"));\nvar matches_mimetype_1 = __importDefault(require(\"../lib/matches-mimetype\"));\nvar openapi_to_json_schema_1 = __importStar(require(\"../lib/openapi-to-json-schema\"));\nvar isJSON = matches_mimetype_1[\"default\"].json;\n/**\n * The order of this object determines how they will be sorted in the compiled JSON Schema\n * representation.\n *\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#parameterObject}\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#parameterObject}\n */\nexports.types = {\n  path: 'Path Params',\n  query: 'Query Params',\n  body: 'Body Params',\n  cookie: 'Cookie Params',\n  formData: 'Form Data',\n  header: 'Headers',\n  metadata: 'Metadata'\n};\nfunction getParametersAsJSONSchema(operation, api, opts) {\n  var _a;\n  var hasCircularRefs = false;\n  var hasDiscriminatorMappingRefs = false;\n  function refLogger(ref, type) {\n    if (type === 'ref') {\n      hasCircularRefs = true;\n    } else {\n      hasDiscriminatorMappingRefs = true;\n    }\n  }\n  function getDeprecated(schema, type) {\n    // If we wish to retain deprecated properties then we shouldn't split them out into the\n    // `deprecatedProps` object.\n    if (opts.retainDeprecatedProperties) {\n      return null;\n    }\n    // If there's no properties, bail\n    if (!schema || !schema.properties) return null;\n    // Clone the original schema so this doesn't interfere with it\n    var deprecatedBody = (0, clone_object_1[\"default\"])(schema);\n    // Booleans are not valid for required in draft 4, 7 or 2020. Not sure why the typing thinks\n    // they are.\n    var requiredParams = schema.required || [];\n    // Find all top-level deprecated properties from the schema - required and readOnly params are\n    // excluded.\n    var allDeprecatedProps = {};\n    Object.keys(deprecatedBody.properties).forEach(function (key) {\n      var deprecatedProp = deprecatedBody.properties[key];\n      if (deprecatedProp.deprecated && !requiredParams.includes(key) && !deprecatedProp.readOnly) {\n        allDeprecatedProps[key] = deprecatedProp;\n      }\n    });\n    // We know this is the right type. todo: don't use as\n    deprecatedBody.properties = allDeprecatedProps;\n    var deprecatedSchema = (0, openapi_to_json_schema_1[\"default\"])(deprecatedBody, {\n      globalDefaults: opts.globalDefaults,\n      prevSchemas: [],\n      refLogger: refLogger,\n      transformer: opts.transformer\n    });\n    // Check if the schema wasn't created or there's no deprecated properties\n    if (Object.keys(deprecatedSchema).length === 0 || Object.keys(deprecatedSchema.properties).length === 0) {\n      return null;\n    }\n    // Remove deprecated properties from the original schema\n    // Not using the clone here becuase we WANT this to affect the original\n    Object.keys(schema.properties).forEach(function (key) {\n      // We know this will always be a SchemaObject\n      if (schema.properties[key].deprecated && !requiredParams.includes(key)) {\n        delete schema.properties[key];\n      }\n    });\n    return {\n      type: type,\n      schema: (0, openapi_to_json_schema_1.isPrimitive)(deprecatedSchema) ? deprecatedSchema : __assign(__assign({}, deprecatedSchema), {\n        $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(deprecatedSchema, api)\n      })\n    };\n  }\n  /**\n   *\n   */\n  function transformRequestBody() {\n    var requestBody = operation.getRequestBody();\n    if (!requestBody || !Array.isArray(requestBody)) return null;\n    var mediaType = requestBody[0],\n      mediaTypeObject = requestBody[1],\n      description = requestBody[2];\n    var type = mediaType === 'application/x-www-form-urlencoded' ? 'formData' : 'body';\n    // If this schema is completely empty, don't bother processing it.\n    if (!mediaTypeObject.schema || !Object.keys(mediaTypeObject.schema).length) {\n      return null;\n    }\n    var prevSchemas = [];\n    if ('example' in mediaTypeObject) {\n      prevSchemas.push({\n        example: mediaTypeObject.example\n      });\n    } else if ('examples' in mediaTypeObject) {\n      prevSchemas.push({\n        examples: Object.values(mediaTypeObject.examples).map(function (example) {\n          return example.value;\n        }).filter(function (val) {\n          return val !== undefined;\n        })\n      });\n    }\n    // We're cloning the request schema because we've had issues with request schemas that were\n    // dereferenced being processed multiple times because their component is also processed.\n    var requestSchema = (0, clone_object_1[\"default\"])(mediaTypeObject.schema);\n    var cleanedSchema = (0, openapi_to_json_schema_1[\"default\"])(requestSchema, {\n      globalDefaults: opts.globalDefaults,\n      prevSchemas: prevSchemas,\n      refLogger: refLogger,\n      transformer: opts.transformer\n    });\n    // If this schema is **still** empty, don't bother returning it.\n    if (!Object.keys(cleanedSchema).length) {\n      return null;\n    }\n    return __assign({\n      type: type,\n      label: exports.types[type],\n      schema: (0, openapi_to_json_schema_1.isPrimitive)(cleanedSchema) ? cleanedSchema : __assign(__assign({}, cleanedSchema), {\n        $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(cleanedSchema, api)\n      }),\n      deprecatedProps: getDeprecated(cleanedSchema, type)\n    }, description ? {\n      description: description\n    } : {});\n  }\n  function transformComponents() {\n    if (!('components' in api)) {\n      return false;\n    }\n    var components = {};\n    Object.keys(api.components).forEach(function (componentType) {\n      if (typeof api.components[componentType] === 'object' && !Array.isArray(api.components[componentType])) {\n        /**\n         * Typescript is INCREDIBLY SLOW parsing this one line. I think it's because of the large\n         * variety of types that that object could represent but I can't yet think of a way to get\n         * around that.\n         *\n         * @todo\n         */\n        components[componentType] = {};\n        Object.keys(api.components[componentType]).forEach(function (schemaName) {\n          var componentSchema = (0, clone_object_1[\"default\"])(api.components[componentType][schemaName]);\n          components[componentType][schemaName] = (0, openapi_to_json_schema_1[\"default\"])(componentSchema, {\n            globalDefaults: opts.globalDefaults,\n            refLogger: refLogger,\n            transformer: opts.transformer\n          });\n        });\n      }\n    });\n    return components;\n  }\n  function transformParameters() {\n    var operationParams = operation.getParameters();\n    var transformed = Object.keys(exports.types).map(function (type) {\n      var required = [];\n      // This `as` actually *could* be a ref, but we don't want refs to pass through here, so\n      // `.in` will never match `type`\n      var parameters = operationParams.filter(function (param) {\n        return param[\"in\"] === type;\n      });\n      if (parameters.length === 0) {\n        return null;\n      }\n      var properties = parameters.reduce(function (prev, current) {\n        var schema = {};\n        if ('schema' in current) {\n          var currentSchema = current.schema ? (0, clone_object_1[\"default\"])(current.schema) : {};\n          if (current.example) {\n            // `example` can be present outside of the `schema` block so if it's there we should\n            // pull it in so it can be handled and returned if it's valid.\n            currentSchema.example = current.example;\n          } else if (current.examples) {\n            // `examples` isn't actually supported here in OAS 3.0, but we might as well support\n            // it because `examples` is JSON Schema and that's fully supported in OAS 3.1.\n            currentSchema.examples = current.examples;\n          }\n          if (current.deprecated) currentSchema.deprecated = current.deprecated;\n          var interimSchema = (0, openapi_to_json_schema_1[\"default\"])(currentSchema, {\n            currentLocation: \"/\".concat(current.name),\n            globalDefaults: opts.globalDefaults,\n            refLogger: refLogger,\n            transformer: opts.transformer\n          });\n          schema = (0, openapi_to_json_schema_1.isPrimitive)(interimSchema) ? interimSchema : __assign(__assign({}, interimSchema), {\n            // Note: this applies a `$schema` version to each field in the larger schema\n            // object. It's not really **correct** but it's what we have to do because\n            // there's a chance that the end user has indicated the schemas are different.\n            $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(currentSchema, api)\n          });\n        } else if ('content' in current && typeof current.content === 'object') {\n          var contentKeys = Object.keys(current.content);\n          if (contentKeys.length) {\n            var contentType = void 0;\n            if (contentKeys.length === 1) {\n              contentType = contentKeys[0];\n            } else {\n              // We should always try to prioritize `application/json` over any other possible\n              // content that might be present on this schema.\n              var jsonLikeContentTypes = contentKeys.filter(function (k) {\n                return isJSON(k);\n              });\n              if (jsonLikeContentTypes.length) {\n                contentType = jsonLikeContentTypes[0];\n              } else {\n                contentType = contentKeys[0];\n              }\n            }\n            if (typeof current.content[contentType] === 'object' && 'schema' in current.content[contentType]) {\n              var currentSchema = current.content[contentType].schema ? (0, clone_object_1[\"default\"])(current.content[contentType].schema) : {};\n              if (current.example) {\n                // `example` can be present outside of the `schema` block so if it's there we\n                // should pull it in so it can be handled and returned if it's valid.\n                currentSchema.example = current.example;\n              } else if (current.examples) {\n                // `examples` isn't actually supported here in OAS 3.0, but we might as well\n                // support it because `examples` is JSON Schema and that's fully supported in OAS\n                // 3.1.\n                currentSchema.examples = current.examples;\n              }\n              if (current.deprecated) currentSchema.deprecated = current.deprecated;\n              var interimSchema = (0, openapi_to_json_schema_1[\"default\"])(currentSchema, {\n                currentLocation: \"/\".concat(current.name),\n                globalDefaults: opts.globalDefaults,\n                refLogger: refLogger,\n                transformer: opts.transformer\n              });\n              schema = (0, openapi_to_json_schema_1.isPrimitive)(interimSchema) ? interimSchema : __assign(__assign({}, interimSchema), {\n                // Note: this applies a `$schema` version to each field in the larger schema\n                // object. It's not really **correct** but it's what we have to do because\n                // there's a chance that the end user has indicated the schemas are different.\n                $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(currentSchema, api)\n              });\n            }\n          }\n        }\n        // Parameter descriptions don't exist in `current.schema` so `constructSchema` will never\n        // have access to it.\n        if (current.description) {\n          if (!(0, openapi_to_json_schema_1.isPrimitive)(schema)) {\n            schema.description = current.description;\n          }\n        }\n        prev[current.name] = schema;\n        if (current.required) {\n          required.push(current.name);\n        }\n        return prev;\n      }, {});\n      // This typing is technically WRONG :( but it's the best we can do for now.\n      var schema = {\n        type: 'object',\n        properties: properties,\n        required: required\n      };\n      return {\n        type: type,\n        label: exports.types[type],\n        schema: schema,\n        deprecatedProps: getDeprecated(schema, type)\n      };\n    }).filter(Boolean);\n    if (!opts.mergeIntoBodyAndMetadata) {\n      return transformed;\n    } else if (!transformed.length) {\n      return [];\n    }\n    // If we want to merge parameters into a single metadata entry then we need to pull all\n    // available schemas and `deprecatedProps` (if we don't want to retain them via the\n    // `retainDeprecatedProps` option) under one roof.\n    var deprecatedProps = transformed.map(function (r) {\n      var _a;\n      return ((_a = r.deprecatedProps) === null || _a === void 0 ? void 0 : _a.schema) || null;\n    }).filter(Boolean);\n    return [{\n      type: 'metadata',\n      label: exports.types.metadata,\n      schema: {\n        allOf: transformed.map(function (r) {\n          return r.schema;\n        })\n      },\n      deprecatedProps: deprecatedProps.length ? {\n        type: 'metadata',\n        schema: {\n          allOf: deprecatedProps\n        }\n      } : null\n    }];\n  }\n  // If this operation neither has any parameters or a request body then we should return null\n  // because there won't be any JSON Schema.\n  if (!operation.hasParameters() && !operation.hasRequestBody()) {\n    return null;\n  }\n  var components = transformComponents();\n  var typeKeys = Object.keys(exports.types);\n  return (_a = [transformRequestBody()]).concat.apply(_a, transformParameters()).filter(Boolean).map(function (group) {\n    /**\n     * Since this library assumes that the schema has already been dereferenced, adding every\n     * component here that **isn't** circular adds a ton of bloat so it'd be cool if `components`\n     * was just the remaining `$ref` pointers that are still being referenced.\n     *\n     * @todo\n     */\n    if (components) {\n      // We should only include components if we've got circular refs or we have discriminator\n      // mapping refs (we want to include them).\n      if (hasCircularRefs || hasDiscriminatorMappingRefs && opts.includeDiscriminatorMappingRefs) {\n        // Fixing typing and confused version mismatches\n        group.schema.components = components;\n      }\n    }\n    // Delete deprecatedProps if it's null on the schema.\n    if (!group.deprecatedProps) delete group.deprecatedProps;\n    return group;\n  }).sort(function (a, b) {\n    return typeKeys.indexOf(a.type) - typeKeys.indexOf(b.type);\n  });\n}\nexports[\"default\"] = getParametersAsJSONSchema;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__importDefault","exports","types","clone_object_1","require","matches_mimetype_1","openapi_to_json_schema_1","isJSON","json","path","query","body","cookie","formData","header","metadata","getParametersAsJSONSchema","operation","api","opts","_a","hasCircularRefs","hasDiscriminatorMappingRefs","refLogger","ref","type","getDeprecated","schema","retainDeprecatedProperties","properties","deprecatedBody","requiredParams","required","allDeprecatedProps","keys","forEach","key","deprecatedProp","deprecated","includes","readOnly","deprecatedSchema","globalDefaults","prevSchemas","transformer","isPrimitive","$schema","getSchemaVersionString","transformRequestBody","requestBody","getRequestBody","Array","isArray","mediaType","mediaTypeObject","description","push","example","examples","values","map","filter","val","requestSchema","cleanedSchema","label","deprecatedProps","transformComponents","components","componentType","schemaName","componentSchema","transformParameters","operationParams","getParameters","transformed","parameters","param","reduce","prev","current","currentSchema","interimSchema","currentLocation","concat","name","content","contentKeys","contentType","jsonLikeContentTypes","Boolean","mergeIntoBodyAndMetadata","r","allOf","hasParameters","hasRequestBody","typeKeys","group","includeDiscriminatorMappingRefs","sort","a","b","indexOf"],"sources":["/Users/pranavsrinivasan/Documents/VSCode/aividgen/server/.api/apis/aivideoapi/node_modules/oas/dist/operation/get-parameters-as-json-schema.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.types = void 0;\nvar clone_object_1 = __importDefault(require(\"../lib/clone-object\"));\nvar matches_mimetype_1 = __importDefault(require(\"../lib/matches-mimetype\"));\nvar openapi_to_json_schema_1 = __importStar(require(\"../lib/openapi-to-json-schema\"));\nvar isJSON = matches_mimetype_1[\"default\"].json;\n/**\n * The order of this object determines how they will be sorted in the compiled JSON Schema\n * representation.\n *\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#parameterObject}\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#parameterObject}\n */\nexports.types = {\n    path: 'Path Params',\n    query: 'Query Params',\n    body: 'Body Params',\n    cookie: 'Cookie Params',\n    formData: 'Form Data',\n    header: 'Headers',\n    metadata: 'Metadata'\n};\nfunction getParametersAsJSONSchema(operation, api, opts) {\n    var _a;\n    var hasCircularRefs = false;\n    var hasDiscriminatorMappingRefs = false;\n    function refLogger(ref, type) {\n        if (type === 'ref') {\n            hasCircularRefs = true;\n        }\n        else {\n            hasDiscriminatorMappingRefs = true;\n        }\n    }\n    function getDeprecated(schema, type) {\n        // If we wish to retain deprecated properties then we shouldn't split them out into the\n        // `deprecatedProps` object.\n        if (opts.retainDeprecatedProperties) {\n            return null;\n        }\n        // If there's no properties, bail\n        if (!schema || !schema.properties)\n            return null;\n        // Clone the original schema so this doesn't interfere with it\n        var deprecatedBody = (0, clone_object_1[\"default\"])(schema);\n        // Booleans are not valid for required in draft 4, 7 or 2020. Not sure why the typing thinks\n        // they are.\n        var requiredParams = (schema.required || []);\n        // Find all top-level deprecated properties from the schema - required and readOnly params are\n        // excluded.\n        var allDeprecatedProps = {};\n        Object.keys(deprecatedBody.properties).forEach(function (key) {\n            var deprecatedProp = deprecatedBody.properties[key];\n            if (deprecatedProp.deprecated && !requiredParams.includes(key) && !deprecatedProp.readOnly) {\n                allDeprecatedProps[key] = deprecatedProp;\n            }\n        });\n        // We know this is the right type. todo: don't use as\n        deprecatedBody.properties = allDeprecatedProps;\n        var deprecatedSchema = (0, openapi_to_json_schema_1[\"default\"])(deprecatedBody, {\n            globalDefaults: opts.globalDefaults,\n            prevSchemas: [],\n            refLogger: refLogger,\n            transformer: opts.transformer\n        });\n        // Check if the schema wasn't created or there's no deprecated properties\n        if (Object.keys(deprecatedSchema).length === 0 || Object.keys(deprecatedSchema.properties).length === 0) {\n            return null;\n        }\n        // Remove deprecated properties from the original schema\n        // Not using the clone here becuase we WANT this to affect the original\n        Object.keys(schema.properties).forEach(function (key) {\n            // We know this will always be a SchemaObject\n            if (schema.properties[key].deprecated && !requiredParams.includes(key)) {\n                delete schema.properties[key];\n            }\n        });\n        return {\n            type: type,\n            schema: (0, openapi_to_json_schema_1.isPrimitive)(deprecatedSchema)\n                ? deprecatedSchema\n                : __assign(__assign({}, deprecatedSchema), { $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(deprecatedSchema, api) })\n        };\n    }\n    /**\n     *\n     */\n    function transformRequestBody() {\n        var requestBody = operation.getRequestBody();\n        if (!requestBody || !Array.isArray(requestBody))\n            return null;\n        var mediaType = requestBody[0], mediaTypeObject = requestBody[1], description = requestBody[2];\n        var type = mediaType === 'application/x-www-form-urlencoded' ? 'formData' : 'body';\n        // If this schema is completely empty, don't bother processing it.\n        if (!mediaTypeObject.schema || !Object.keys(mediaTypeObject.schema).length) {\n            return null;\n        }\n        var prevSchemas = [];\n        if ('example' in mediaTypeObject) {\n            prevSchemas.push({ example: mediaTypeObject.example });\n        }\n        else if ('examples' in mediaTypeObject) {\n            prevSchemas.push({\n                examples: Object.values(mediaTypeObject.examples)\n                    .map(function (example) { return example.value; })\n                    .filter(function (val) { return val !== undefined; })\n            });\n        }\n        // We're cloning the request schema because we've had issues with request schemas that were\n        // dereferenced being processed multiple times because their component is also processed.\n        var requestSchema = (0, clone_object_1[\"default\"])(mediaTypeObject.schema);\n        var cleanedSchema = (0, openapi_to_json_schema_1[\"default\"])(requestSchema, {\n            globalDefaults: opts.globalDefaults,\n            prevSchemas: prevSchemas,\n            refLogger: refLogger,\n            transformer: opts.transformer\n        });\n        // If this schema is **still** empty, don't bother returning it.\n        if (!Object.keys(cleanedSchema).length) {\n            return null;\n        }\n        return __assign({ type: type, label: exports.types[type], schema: (0, openapi_to_json_schema_1.isPrimitive)(cleanedSchema)\n                ? cleanedSchema\n                : __assign(__assign({}, cleanedSchema), { $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(cleanedSchema, api) }), deprecatedProps: getDeprecated(cleanedSchema, type) }, (description ? { description: description } : {}));\n    }\n    function transformComponents() {\n        if (!('components' in api)) {\n            return false;\n        }\n        var components = {};\n        Object.keys(api.components).forEach(function (componentType) {\n            if (typeof api.components[componentType] === 'object' && !Array.isArray(api.components[componentType])) {\n                /**\n                 * Typescript is INCREDIBLY SLOW parsing this one line. I think it's because of the large\n                 * variety of types that that object could represent but I can't yet think of a way to get\n                 * around that.\n                 *\n                 * @todo\n                 */\n                components[componentType] = {};\n                Object.keys(api.components[componentType]).forEach(function (schemaName) {\n                    var componentSchema = (0, clone_object_1[\"default\"])(api.components[componentType][schemaName]);\n                    components[componentType][schemaName] = (0, openapi_to_json_schema_1[\"default\"])(componentSchema, {\n                        globalDefaults: opts.globalDefaults,\n                        refLogger: refLogger,\n                        transformer: opts.transformer\n                    });\n                });\n            }\n        });\n        return components;\n    }\n    function transformParameters() {\n        var operationParams = operation.getParameters();\n        var transformed = Object.keys(exports.types)\n            .map(function (type) {\n            var required = [];\n            // This `as` actually *could* be a ref, but we don't want refs to pass through here, so\n            // `.in` will never match `type`\n            var parameters = operationParams.filter(function (param) { return param[\"in\"] === type; });\n            if (parameters.length === 0) {\n                return null;\n            }\n            var properties = parameters.reduce(function (prev, current) {\n                var schema = {};\n                if ('schema' in current) {\n                    var currentSchema = current.schema ? (0, clone_object_1[\"default\"])(current.schema) : {};\n                    if (current.example) {\n                        // `example` can be present outside of the `schema` block so if it's there we should\n                        // pull it in so it can be handled and returned if it's valid.\n                        currentSchema.example = current.example;\n                    }\n                    else if (current.examples) {\n                        // `examples` isn't actually supported here in OAS 3.0, but we might as well support\n                        // it because `examples` is JSON Schema and that's fully supported in OAS 3.1.\n                        currentSchema.examples = current.examples;\n                    }\n                    if (current.deprecated)\n                        currentSchema.deprecated = current.deprecated;\n                    var interimSchema = (0, openapi_to_json_schema_1[\"default\"])(currentSchema, {\n                        currentLocation: \"/\".concat(current.name),\n                        globalDefaults: opts.globalDefaults,\n                        refLogger: refLogger,\n                        transformer: opts.transformer\n                    });\n                    schema = (0, openapi_to_json_schema_1.isPrimitive)(interimSchema)\n                        ? interimSchema\n                        : __assign(__assign({}, interimSchema), { \n                            // Note: this applies a `$schema` version to each field in the larger schema\n                            // object. It's not really **correct** but it's what we have to do because\n                            // there's a chance that the end user has indicated the schemas are different.\n                            $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(currentSchema, api) });\n                }\n                else if ('content' in current && typeof current.content === 'object') {\n                    var contentKeys = Object.keys(current.content);\n                    if (contentKeys.length) {\n                        var contentType = void 0;\n                        if (contentKeys.length === 1) {\n                            contentType = contentKeys[0];\n                        }\n                        else {\n                            // We should always try to prioritize `application/json` over any other possible\n                            // content that might be present on this schema.\n                            var jsonLikeContentTypes = contentKeys.filter(function (k) { return isJSON(k); });\n                            if (jsonLikeContentTypes.length) {\n                                contentType = jsonLikeContentTypes[0];\n                            }\n                            else {\n                                contentType = contentKeys[0];\n                            }\n                        }\n                        if (typeof current.content[contentType] === 'object' && 'schema' in current.content[contentType]) {\n                            var currentSchema = current.content[contentType].schema\n                                ? (0, clone_object_1[\"default\"])(current.content[contentType].schema)\n                                : {};\n                            if (current.example) {\n                                // `example` can be present outside of the `schema` block so if it's there we\n                                // should pull it in so it can be handled and returned if it's valid.\n                                currentSchema.example = current.example;\n                            }\n                            else if (current.examples) {\n                                // `examples` isn't actually supported here in OAS 3.0, but we might as well\n                                // support it because `examples` is JSON Schema and that's fully supported in OAS\n                                // 3.1.\n                                currentSchema.examples = current.examples;\n                            }\n                            if (current.deprecated)\n                                currentSchema.deprecated = current.deprecated;\n                            var interimSchema = (0, openapi_to_json_schema_1[\"default\"])(currentSchema, {\n                                currentLocation: \"/\".concat(current.name),\n                                globalDefaults: opts.globalDefaults,\n                                refLogger: refLogger,\n                                transformer: opts.transformer\n                            });\n                            schema = (0, openapi_to_json_schema_1.isPrimitive)(interimSchema)\n                                ? interimSchema\n                                : __assign(__assign({}, interimSchema), { \n                                    // Note: this applies a `$schema` version to each field in the larger schema\n                                    // object. It's not really **correct** but it's what we have to do because\n                                    // there's a chance that the end user has indicated the schemas are different.\n                                    $schema: (0, openapi_to_json_schema_1.getSchemaVersionString)(currentSchema, api) });\n                        }\n                    }\n                }\n                // Parameter descriptions don't exist in `current.schema` so `constructSchema` will never\n                // have access to it.\n                if (current.description) {\n                    if (!(0, openapi_to_json_schema_1.isPrimitive)(schema)) {\n                        schema.description = current.description;\n                    }\n                }\n                prev[current.name] = schema;\n                if (current.required) {\n                    required.push(current.name);\n                }\n                return prev;\n            }, {});\n            // This typing is technically WRONG :( but it's the best we can do for now.\n            var schema = {\n                type: 'object',\n                properties: properties,\n                required: required\n            };\n            return {\n                type: type,\n                label: exports.types[type],\n                schema: schema,\n                deprecatedProps: getDeprecated(schema, type)\n            };\n        })\n            .filter(Boolean);\n        if (!opts.mergeIntoBodyAndMetadata) {\n            return transformed;\n        }\n        else if (!transformed.length) {\n            return [];\n        }\n        // If we want to merge parameters into a single metadata entry then we need to pull all\n        // available schemas and `deprecatedProps` (if we don't want to retain them via the\n        // `retainDeprecatedProps` option) under one roof.\n        var deprecatedProps = transformed.map(function (r) { var _a; return ((_a = r.deprecatedProps) === null || _a === void 0 ? void 0 : _a.schema) || null; }).filter(Boolean);\n        return [\n            {\n                type: 'metadata',\n                label: exports.types.metadata,\n                schema: {\n                    allOf: transformed.map(function (r) { return r.schema; })\n                },\n                deprecatedProps: deprecatedProps.length\n                    ? {\n                        type: 'metadata',\n                        schema: {\n                            allOf: deprecatedProps\n                        }\n                    }\n                    : null\n            },\n        ];\n    }\n    // If this operation neither has any parameters or a request body then we should return null\n    // because there won't be any JSON Schema.\n    if (!operation.hasParameters() && !operation.hasRequestBody()) {\n        return null;\n    }\n    var components = transformComponents();\n    var typeKeys = Object.keys(exports.types);\n    return (_a = [transformRequestBody()])\n        .concat.apply(_a, transformParameters()).filter(Boolean)\n        .map(function (group) {\n        /**\n         * Since this library assumes that the schema has already been dereferenced, adding every\n         * component here that **isn't** circular adds a ton of bloat so it'd be cool if `components`\n         * was just the remaining `$ref` pointers that are still being referenced.\n         *\n         * @todo\n         */\n        if (components) {\n            // We should only include components if we've got circular refs or we have discriminator\n            // mapping refs (we want to include them).\n            if (hasCircularRefs || (hasDiscriminatorMappingRefs && opts.includeDiscriminatorMappingRefs)) {\n                // Fixing typing and confused version mismatches\n                group.schema.components = components;\n            }\n        }\n        // Delete deprecatedProps if it's null on the schema.\n        if (!group.deprecatedProps)\n            delete group.deprecatedProps;\n        return group;\n    })\n        .sort(function (a, b) {\n        return typeKeys.indexOf(a.type) - typeKeys.indexOf(b.type);\n    });\n}\nexports[\"default\"] = getParametersAsJSONSchema;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}