{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nexports.utils = exports.Webhook = exports.Callback = exports.Operation = void 0;\nvar json_schema_ref_parser_1 = __importDefault(require(\"@readme/json-schema-ref-parser\"));\nvar path_to_regexp_1 = require(\"path-to-regexp\");\nvar get_auth_1 = __importDefault(require(\"./lib/get-auth\"));\nvar get_user_variable_1 = __importDefault(require(\"./lib/get-user-variable\"));\nvar operation_1 = __importStar(require(\"./operation\"));\nexports.Operation = operation_1[\"default\"];\nexports.Callback = operation_1.Callback;\nexports.Webhook = operation_1.Webhook;\nvar utils_1 = __importStar(require(\"./utils\"));\nexports.utils = utils_1[\"default\"];\nvar SERVER_VARIABLE_REGEX = /{([-_a-zA-Z0-9:.[\\]]+)}/g;\nfunction ensureProtocol(url) {\n  // Add protocol to urls starting with // e.g. //example.com\n  // This is because httpsnippet throws a HARError when it doesnt have a protocol\n  if (url.match(/^\\/\\//)) {\n    return \"https:\".concat(url);\n  }\n  // Add protocol to urls with no // within them\n  // This is because httpsnippet throws a HARError when it doesnt have a protocol\n  if (!url.match(/\\/\\//)) {\n    return \"https://\".concat(url);\n  }\n  return url;\n}\nfunction stripTrailingSlash(url) {\n  if (url[url.length - 1] === '/') {\n    return url.slice(0, -1);\n  }\n  return url;\n}\n/**\n * Normalize a OpenAPI server URL by ensuring that it has a proper HTTP protocol and doesn't have a\n * trailing slash.\n *\n * @param api The API definition that we're processing.\n * @param selected The index of the `servers` array in the API definition that we want to normalize.\n */\nfunction normalizedUrl(api, selected) {\n  var exampleDotCom = 'https://example.com';\n  var url;\n  try {\n    url = api.servers[selected].url;\n    // This is to catch the case where servers = [{}]\n    if (!url) throw new Error('no url');\n    // Stripping the '/' off the end\n    url = stripTrailingSlash(url);\n    // Check if the URL is just a path a missing an origin, for example `/api/v3`. If so, then make\n    // `example.com` the origin to avoid it becoming something invalid like `https:///api/v3`.\n    // RM-1044\n    if (url.startsWith('/') && !url.startsWith('//')) {\n      var urlWithOrigin = new URL(exampleDotCom);\n      urlWithOrigin.pathname = url;\n      url = urlWithOrigin.href;\n    }\n  } catch (e) {\n    url = exampleDotCom;\n  }\n  return ensureProtocol(url);\n}\n/**\n * With a URL that may contain server variables, transform those server variables into regex that\n * we can query against.\n *\n * For example, when given `https://{region}.node.example.com/v14` this will return back:\n *\n *    https://([-_a-zA-Z0-9:.[\\\\]]+).node.example.com/v14\n *\n * @param url URL to transform\n */\nfunction transformUrlIntoRegex(url) {\n  return stripTrailingSlash(url.replace(SERVER_VARIABLE_REGEX, '([-_a-zA-Z0-9:.[\\\\]]+)'));\n}\n/**\n * Normalize a path so that we can use it with `path-to-regexp` to do operation lookups.\n *\n * @param path Path to normalize.\n */\nfunction normalizePath(path) {\n  return path\n  // This regex transforms `{pathParam}` into `:pathParam` so we can regex against it. We're\n  // also handling quirks here like if there's an optional proceeding or trailing curly bracket\n  // (`{{pathParam}` or `{pathParam}}`) as any unescaped curlys, which would be present in\n  // `:pathParam}`, will throw a regex exception.\n  .replace(/({?){(.*?)}(}?)/g, function (str) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n    // If a path contains a path parameter with hyphens, like `:dlc-release`, when it's regexd\n    // with `path-to-regexp` it match against the `:dlc` portion of the parameter, breaking all\n    // matching against the full path.\n    //\n    // For example on `/games/:game/dlc/:dlc-release` the regex that's actually used to search\n    // against a path like `/games/destiny-2/dlc/witch-queen` is the following:\n    //    /^\\/games(?:\\/([^\\/#\\?]+?))\\/dlc(?:\\/([^\\/#\\?]+?))-release[\\/#\\?]?$/i\n    //\n    // However if `:dlc-release` is rewritten to `:dlcrelease` we end up with a functional\n    // regex: /^\\/games(?:\\/([^\\/#\\?]+?))\\/dlc(?:\\/([^\\/#\\?]+?))[\\/#\\?]?$/i.\n    return \":\".concat(args[1].replace('-', ''));\n  })\n  // In addition to transforming `{pathParam}` into `:pathParam` we also need to escape cases\n  // where a non-variabled colon is next to a variabled-colon because if we don't then\n  // `path-to-regexp` won't be able to correct identify where the variable starts.\n  //\n  // For example if the URL is `/post/:param1::param2` we'll be escaping it to\n  // `/post/:param1\\::param2`.\n  .replace(/::/, '\\\\::')\n  // We also need to escape question marks too because they're treated as regex modifiers.\n  .split('?')[0];\n}\n/**\n * Generate path matches for a given path and origin on a set of OpenAPI path objects.\n *\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#pathsObject}\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#pathsObject}\n * @param paths The OpenAPI Paths Object to process.\n * @param pathName Path to look for a match.\n * @param origin The origin that we're matching against.\n */\nfunction generatePathMatches(paths, pathName, origin) {\n  var prunedPathName = pathName.split('?')[0];\n  return Object.keys(paths).map(function (path) {\n    var cleanedPath = normalizePath(path);\n    var matchResult;\n    try {\n      var matchStatement = (0, path_to_regexp_1.match)(cleanedPath, {\n        decode: decodeURIComponent\n      });\n      matchResult = matchStatement(prunedPathName);\n    } catch (err) {\n      // If path matching fails for whatever reason (maybe they have a malformed path parameter)\n      // then we shouldn't also fail.\n      return;\n    }\n    var slugs = {};\n    if (matchResult && Object.keys(matchResult.params).length) {\n      Object.keys(matchResult.params).forEach(function (param) {\n        slugs[\":\".concat(param)] = matchResult.params[param];\n      });\n    }\n    // eslint-disable-next-line consistent-return\n    return {\n      url: {\n        origin: origin,\n        path: cleanedPath.replace(/\\\\::/, '::'),\n        nonNormalizedPath: path,\n        slugs: slugs\n      },\n      operation: paths[path],\n      match: matchResult\n    };\n  }).filter(Boolean).filter(function (p) {\n    return p.match;\n  });\n}\n/**\n * @param pathMatches Array of path matches to filter down.\n * @param targetMethod HTTP method to look for.\n * @returns Filtered down path matches.\n */\nfunction filterPathMethods(pathMatches, targetMethod) {\n  var regExp = (0, path_to_regexp_1.pathToRegexp)(targetMethod);\n  return pathMatches.map(function (p) {\n    var captures = Object.keys(p.operation).filter(function (r) {\n      return regExp.exec(r);\n    });\n    if (captures.length) {\n      var method = captures[0];\n      p.url.method = method.toUpperCase();\n      return {\n        url: p.url,\n        operation: p.operation[method]\n      };\n    }\n    return false;\n  }).filter(Boolean);\n}\n/**\n * @param pathMatches URL and PathsObject matches to narrow down to find a target path.\n * @returns An object containing matches that were discovered in the API definition.\n */\nfunction findTargetPath(pathMatches) {\n  var minCount = Object.keys(pathMatches[0].url.slugs).length;\n  var operation;\n  for (var m = 0; m < pathMatches.length; m += 1) {\n    var selection = pathMatches[m];\n    var paramCount = Object.keys(selection.url.slugs).length;\n    if (paramCount <= minCount) {\n      minCount = paramCount;\n      operation = selection;\n    }\n  }\n  return operation;\n}\nvar Oas = /** @class */function () {\n  /**\n   * @param oas An OpenAPI definition.\n   * @param user The information about a user that we should use when pulling auth tokens from\n   *    security schemes.\n   */\n  function Oas(oas, user) {\n    // @todo throw an exception here instead of allowing an empty oas\n    this.api = oas;\n    this.user = user || {};\n    this.promises = [];\n    this.dereferencing = {\n      processing: false,\n      complete: false,\n      circularRefs: []\n    };\n  }\n  /**\n   * This will initialize a new instance of the `Oas` class. This method is useful if you're using\n   * Typescript and are attempting to supply an untyped JSON object into `Oas` as it will force-type\n   * that object to an `OASDocument` for you.\n   *\n   * @param oas An OpenAPI definition.\n   * @param user The information about a user that we should use when pulling auth tokens from\n   *    security schemes.\n   */\n  Oas.init = function (oas, user) {\n    return new Oas(oas, user);\n  };\n  /**\n   * Retrieve the OpenAPI version that this API definition is targeted for.\n   */\n  Oas.prototype.getVersion = function () {\n    if (this.api.openapi) {\n      return this.api.openapi;\n    }\n    throw new Error('Unable to recognize what specification version this API definition conforms to.');\n  };\n  /**\n   * Retrieve the current OpenAPI API Definition.\n   *\n   */\n  Oas.prototype.getDefinition = function () {\n    return this.api;\n  };\n  Oas.prototype.url = function (selected, variables) {\n    if (selected === void 0) {\n      selected = 0;\n    }\n    var url = normalizedUrl(this.api, selected);\n    return this.replaceUrl(url, variables || this.variables(selected)).trim();\n  };\n  Oas.prototype.variables = function (selected) {\n    if (selected === void 0) {\n      selected = 0;\n    }\n    var variables;\n    try {\n      variables = this.api.servers[selected].variables;\n      if (!variables) throw new Error('no variables');\n    } catch (e) {\n      variables = {};\n    }\n    return variables;\n  };\n  Oas.prototype.defaultVariables = function (selected) {\n    var _this = this;\n    if (selected === void 0) {\n      selected = 0;\n    }\n    var variables = this.variables(selected);\n    var defaults = {};\n    Object.keys(variables).forEach(function (key) {\n      defaults[key] = (0, get_user_variable_1[\"default\"])(_this.user, key) || variables[key][\"default\"] || '';\n    });\n    return defaults;\n  };\n  Oas.prototype.splitUrl = function (selected) {\n    if (selected === void 0) {\n      selected = 0;\n    }\n    var url = normalizedUrl(this.api, selected);\n    var variables = this.variables(selected);\n    return url.split(/({.+?})/).filter(Boolean).map(function (part, i) {\n      var isVariable = part.match(/[{}]/);\n      var value = part.replace(/[{}]/g, '');\n      // To ensure unique keys, we're going to create a key\n      // with the value concatenated to its index.\n      var key = \"\".concat(value, \"-\").concat(i);\n      if (!isVariable) {\n        return {\n          type: 'text',\n          value: value,\n          key: key\n        };\n      }\n      var variable = variables === null || variables === void 0 ? void 0 : variables[value];\n      return {\n        type: 'variable',\n        value: value,\n        key: key,\n        description: variable === null || variable === void 0 ? void 0 : variable.description,\n        \"enum\": variable === null || variable === void 0 ? void 0 : variable[\"enum\"]\n      };\n    });\n  };\n  /**\n   * With a fully composed server URL, run through our list of known OAS servers and return back\n   * which server URL was selected along with any contained server variables split out.\n   *\n   * For example, if you have an OAS server URL of `https://{name}.example.com:{port}/{basePath}`,\n   * and pass in `https://buster.example.com:3000/pet` to this function, you'll get back the\n   * following:\n   *\n   *    { selected: 0, variables: { name: 'buster', port: 3000, basePath: 'pet' } }\n   *\n   * Re-supplying this data to `oas.url()` should return the same URL you passed into this method.\n   *\n   * @param baseUrl A given URL to extract server variables out of.\n   */\n  Oas.prototype.splitVariables = function (baseUrl) {\n    var matchedServer = (this.api.servers || []).map(function (server, i) {\n      var rgx = transformUrlIntoRegex(server.url);\n      var found = new RegExp(rgx).exec(baseUrl);\n      if (!found) {\n        return false;\n      }\n      // While it'd be nice to use named regex groups to extract path parameters from the URL and\n      // match them up with the variables that we have present in it, JS unfortunately doesn't\n      // support having the groups duplicated. So instead of doing that we need to re-regex the\n      // server URL, this time splitting on the path parameters -- this way we'll be able to\n      // extract the parameter names and match them up with the matched server that we obtained\n      // above.\n      var variables = {};\n      Array.from(server.url.matchAll(SERVER_VARIABLE_REGEX)).forEach(function (variable, y) {\n        variables[variable[1]] = found[y + 1];\n      });\n      return {\n        selected: i,\n        variables: variables\n      };\n    }).filter(Boolean);\n    return matchedServer.length ? matchedServer[0] : false;\n  };\n  /**\n   * Replace templated variables with supplied data in a given URL.\n   *\n   * There are a couple ways that this will utilize variable data:\n   *\n   *  - If data is stored in `this.user` and it matches up with the variable name in the URL user\n   *    data will always take priority. See `getUserVariable` for some more information on how this\n   *    data is pulled from `this.user`.\n   *  - Supplying a `variables` object. This incoming `variables` object can be two formats:\n   *    `{ variableName: { default: 'value' } }` and `{ variableName: 'value' }`. If the former is\n   *    present, that will take prescendence over the latter.\n   *\n   * If no variables supplied match up with the template name, the template name will instead be\n   * used as the variable data.\n   *\n   * @param url A URL to swap variables into.\n   * @param variables An object containing variables to swap into the URL.\n   */\n  Oas.prototype.replaceUrl = function (url, variables) {\n    var _this = this;\n    if (variables === void 0) {\n      variables = {};\n    }\n    // When we're constructing URLs, server URLs with trailing slashes cause problems with doing\n    // lookups, so if we have one here on, slice it off.\n    return stripTrailingSlash(url.replace(SERVER_VARIABLE_REGEX, function (original, key) {\n      var userVariable = (0, get_user_variable_1[\"default\"])(_this.user, key);\n      if (userVariable) {\n        return userVariable;\n      }\n      if (key in variables) {\n        var data = variables[key];\n        if (typeof data === 'object') {\n          if (!Array.isArray(data) && data !== null && 'default' in data) {\n            return data[\"default\"];\n          }\n        } else {\n          return data;\n        }\n      }\n      return original;\n    }));\n  };\n  /**\n   * Retrieve an Operation of Webhook class instance for a given path and method.\n   *\n   * @param path Path to lookup and retrieve.\n   * @param method HTTP Method to retrieve on the path.\n   */\n  Oas.prototype.operation = function (path, method, opts) {\n    var _a, _b, _c, _d;\n    if (opts === void 0) {\n      opts = {};\n    }\n    // If we're unable to locate an operation for this path+method combination within the API\n    // definition, we should still set an empty schema on the operation in the `Operation` class\n    // because if we don't trying to use any of the accessors on that class are going to fail as\n    // `schema` will be `undefined`.\n    var operation = {\n      parameters: []\n    };\n    if (opts.isWebhook) {\n      var api = this.api;\n      // Typecasting this to a `PathsObject` because we don't have `$ref` pointers here.\n      if ((_a = api === null || api === void 0 ? void 0 : api.webhooks[path]) === null || _a === void 0 ? void 0 : _a[method]) {\n        operation = api.webhooks[path][method];\n        return new operation_1.Webhook(api, path, method, operation);\n      }\n    }\n    if ((_d = (_c = (_b = this === null || this === void 0 ? void 0 : this.api) === null || _b === void 0 ? void 0 : _b.paths) === null || _c === void 0 ? void 0 : _c[path]) === null || _d === void 0 ? void 0 : _d[method]) {\n      operation = this.api.paths[path][method];\n    }\n    return new operation_1[\"default\"](this.api, path, method, operation);\n  };\n  Oas.prototype.findOperationMatches = function (url) {\n    var _a;\n    var _this = this;\n    var _b = new URL(url),\n      origin = _b.origin,\n      hostname = _b.hostname;\n    var originRegExp = new RegExp(origin, 'i');\n    var _c = this.api,\n      servers = _c.servers,\n      paths = _c.paths;\n    var pathName;\n    var targetServer;\n    var matchedServer;\n    if (!servers || !servers.length) {\n      // If this API definition doesn't have any servers set up let's treat it as if it were\n      // https://example.com because that's the default origin we add in `normalizedUrl` under the\n      // same circumstances. Without this we won't be able to match paths within what is otherwise\n      // a valid OpenAPI definition.\n      matchedServer = {\n        url: 'https://example.com'\n      };\n    } else {\n      matchedServer = servers.find(function (s) {\n        return originRegExp.exec(_this.replaceUrl(s.url, s.variables || {}));\n      });\n      if (!matchedServer) {\n        var hostnameRegExp_1 = new RegExp(hostname);\n        matchedServer = servers.find(function (s) {\n          return hostnameRegExp_1.exec(_this.replaceUrl(s.url, s.variables || {}));\n        });\n      }\n    }\n    // If we **still** haven't found a matching server, then the OAS server URL might have server\n    // variables and we should loosen it up with regex to try to discover a matching path.\n    //\n    // For example if an OAS has `https://{region}.node.example.com/v14` set as its server URL, and\n    // the `this.user` object has a `region` value of `us`, if we're trying to locate an operation\n    // for https://eu.node.example.com/v14/api/esm we won't be able to because normally the users\n    // `region` of `us` will be transposed in and we'll be trying to locate `eu.node.example.com`\n    // in `us.node.example.com` -- which won't work.\n    //\n    // So what this does is transform `https://{region}.node.example.com/v14` into\n    // `https://([-_a-zA-Z0-9[\\\\]]+).node.example.com/v14`, and from there we'll be able to match\n    // https://eu.node.example.com/v14/api/esm and ultimately find the operation matches for\n    // `/api/esm`.\n    if (!matchedServer) {\n      var matchedServerAndPath = servers.map(function (server) {\n        var rgx = transformUrlIntoRegex(server.url);\n        var found = new RegExp(rgx).exec(url);\n        if (!found) {\n          return false;\n        }\n        return {\n          matchedServer: server,\n          pathName: url.split(new RegExp(rgx)).slice(-1).pop()\n        };\n      }).filter(Boolean);\n      if (!matchedServerAndPath.length) {\n        return undefined;\n      }\n      pathName = matchedServerAndPath[0].pathName;\n      targetServer = __assign({}, matchedServerAndPath[0].matchedServer);\n    } else {\n      // Instead of setting `url` directly against `matchedServer` we need to set it to an\n      // intermediary object as directly modifying `matchedServer.url` will in turn update\n      // `this.servers[idx].url` which we absolutely do not want to happen.\n      targetServer = __assign(__assign({}, matchedServer), {\n        url: this.replaceUrl(matchedServer.url, matchedServer.variables || {})\n      });\n      _a = url.split(new RegExp(targetServer.url, 'i')), pathName = _a[1];\n    }\n    if (pathName === undefined) return undefined;\n    if (pathName === '') pathName = '/';\n    var annotatedPaths = generatePathMatches(paths, pathName, targetServer.url);\n    if (!annotatedPaths.length) return undefined;\n    return annotatedPaths;\n  };\n  /**\n   * Discover an operation in an OAS from a fully-formed URL and HTTP method. Will return an object\n   * containing a `url` object and another one for `operation`. This differs from `getOperation()`\n   * in that it does not return an instance of the `Operation` class.\n   *\n   * @param url A full URL to look up.\n   * @param method The cooresponding HTTP method to look up.\n   */\n  Oas.prototype.findOperation = function (url, method) {\n    var annotatedPaths = this.findOperationMatches(url);\n    if (!annotatedPaths) {\n      return undefined;\n    }\n    var matches = filterPathMethods(annotatedPaths, method);\n    if (!matches.length) return undefined;\n    return findTargetPath(matches);\n  };\n  /**\n   * Discover an operation in an OAS from a fully-formed URL without an HTTP method. Will return an\n   * object containing a `url` object and another one for `operation`.\n   *\n   * @param url A full URL to look up.\n   */\n  Oas.prototype.findOperationWithoutMethod = function (url) {\n    var annotatedPaths = this.findOperationMatches(url);\n    if (!annotatedPaths) {\n      return undefined;\n    }\n    return findTargetPath(annotatedPaths);\n  };\n  /**\n   * Retrieve an operation in an OAS from a fully-formed URL and HTTP method. Differs from\n   * `findOperation` in that while this method will return an `Operation` instance,\n   * `findOperation()` does not.\n   *\n   * @param url A full URL to look up.\n   * @param method The cooresponding HTTP method to look up.\n   */\n  Oas.prototype.getOperation = function (url, method) {\n    var op = this.findOperation(url, method);\n    if (op === undefined) {\n      return undefined;\n    }\n    return this.operation(op.url.nonNormalizedPath, method);\n  };\n  /**\n   * With an object of user information, retrieve the appropriate API auth keys from the current\n   * OAS definition.\n   *\n   * @see {@link https://docs.readme.com/docs/passing-data-to-jwt}\n   * @param user User\n   * @param selectedApp The user app to retrieve an auth key for.\n   */\n  Oas.prototype.getAuth = function (user, selectedApp) {\n    var _a, _b;\n    if (!((_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.components) === null || _b === void 0 ? void 0 : _b.securitySchemes)) {\n      return {};\n    }\n    return (0, get_auth_1[\"default\"])(this.api, user, selectedApp);\n  };\n  /**\n   * Returns the `paths` object that exists in this API definition but with every `method` mapped\n   * to an instance of the `Operation` class.\n   *\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n   */\n  Oas.prototype.getPaths = function () {\n    var _this = this;\n    /**\n     * Because a path doesn't need to contain a keyed-object of HTTP methods, we should exclude\n     * anything from within the paths object that isn't a known HTTP method.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#fixed-fields-7}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#fixed-fields-7}\n     */\n    var paths = {};\n    Object.keys(this.api.paths ? this.api.paths : []).forEach(function (path) {\n      // If this is a specification extension then we should ignore it.\n      if (path.startsWith('x-')) {\n        return;\n      }\n      paths[path] = {};\n      // Though this library is generally unaware of `$ref` pointers we're making a singular\n      // exception with this accessor out of convenience.\n      if ('$ref' in _this.api.paths[path]) {\n        _this.api.paths[path] = utils_1[\"default\"].findSchemaDefinition(_this.api.paths[path].$ref, _this.api);\n      }\n      Object.keys(_this.api.paths[path]).forEach(function (method) {\n        if (!utils_1.supportedMethods.has(method)) return;\n        paths[path][method] = _this.operation(path, method);\n      });\n    });\n    return paths;\n  };\n  /**\n   * Returns the `webhooks` object that exists in this API definition but with every `method`\n   * mapped to an instance of the `Webhook` class.\n   *\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n   */\n  Oas.prototype.getWebhooks = function () {\n    var _this = this;\n    var webhooks = {};\n    var api = this.api;\n    Object.keys(api.webhooks ? api.webhooks : []).forEach(function (id) {\n      webhooks[id] = {};\n      Object.keys(api.webhooks[id]).forEach(function (method) {\n        webhooks[id][method] = _this.operation(id, method, {\n          isWebhook: true\n        });\n      });\n    });\n    return webhooks;\n  };\n  /**\n   * Return an array of all tag names that exist on this API definition.\n   *\n   * Note: This method right now does **not** factor in webhooks that have tags.\n   *\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n   * @param setIfMissing If a tag is not present on an operation that operations path will be added\n   *    into the list of tags returned.\n   */\n  Oas.prototype.getTags = function (setIfMissing) {\n    if (setIfMissing === void 0) {\n      setIfMissing = false;\n    }\n    var allTags = new Set();\n    Object.entries(this.getPaths()).forEach(function (_a) {\n      var path = _a[0],\n        operations = _a[1];\n      Object.values(operations).forEach(function (operation) {\n        var tags = operation.getTags();\n        if (setIfMissing && !tags.length) {\n          allTags.add(path);\n          return;\n        }\n        tags.forEach(function (tag) {\n          allTags.add(tag.name);\n        });\n      });\n    });\n    return Array.from(allTags);\n  };\n  /**\n   * Determine if a given a custom specification extension exists within the API definition.\n   *\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#specificationExtensions}\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#specificationExtensions}\n   * @param extension Specification extension to lookup.\n   */\n  Oas.prototype.hasExtension = function (extension) {\n    return Boolean(this.api && extension in this.api);\n  };\n  /**\n   * Retrieve a custom specification extension off of the API definition.\n   *\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#specificationExtensions}\n   * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#specificationExtensions}\n   * @param extension Specification extension to lookup.\n   */\n  Oas.prototype.getExtension = function (extension) {\n    var _a;\n    return (_a = this.api) === null || _a === void 0 ? void 0 : _a[extension];\n  };\n  /**\n   * Retrieve any circular `$ref` pointers that maybe present within the API definition.\n   *\n   * This method requires that you first dereference the definition.\n   *\n   * @see Oas.dereference\n   */\n  Oas.prototype.getCircularReferences = function () {\n    if (!this.dereferencing.complete) {\n      throw new Error('#dereference() must be called first in order for this method to obtain circular references.');\n    }\n    return this.dereferencing.circularRefs;\n  };\n  /**\n   * Dereference the current OAS definition so it can be parsed free of worries of `$ref` schemas\n   * and circular structures.\n   *\n   */\n  Oas.prototype.dereference = function (opts) {\n    if (opts === void 0) {\n      opts = {\n        preserveRefAsJSONSchemaTitle: false\n      };\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, api, promises, parser;\n      var _this = this;\n      return __generator(this, function (_b) {\n        if (this.dereferencing.complete) {\n          return [2 /*return*/, new Promise(function (resolve) {\n            resolve(true);\n          })];\n        }\n        if (this.dereferencing.processing) {\n          return [2 /*return*/, new Promise(function (resolve, reject) {\n            _this.promises.push({\n              resolve: resolve,\n              reject: reject\n            });\n          })];\n        }\n        this.dereferencing.processing = true;\n        _a = this, api = _a.api, promises = _a.promises;\n        // Because referencing will eliminate any lineage back to the original `$ref`, information that\n        // we might need at some point, we should run through all available component schemas and denote\n        // what their name is so that when dereferencing happens below those names will be preserved.\n        if (api && api.components && api.components.schemas && typeof api.components.schemas === 'object') {\n          Object.keys(api.components.schemas).forEach(function (schemaName) {\n            if (opts.preserveRefAsJSONSchemaTitle) {\n              // This may result in some data loss if there's already a `title` present, but in the case\n              // where we want to generate code for the API definition (see http://npm.im/api), we'd\n              // prefer to retain original reference name as a title for any generated types.\n              api.components.schemas[schemaName].title = schemaName;\n            }\n            api.components.schemas[schemaName]['x-readme-ref-name'] = schemaName;\n          });\n        }\n        parser = new json_schema_ref_parser_1[\"default\"]();\n        return [2 /*return*/, parser.dereference(api || {}, {\n          resolve: {\n            // We shouldn't be resolving external pointers at this point so just ignore them.\n            external: false\n          },\n          dereference: {\n            // If circular `$refs` are ignored they'll remain in the OAS as `$ref: String`, otherwise\n            // `$ref‘ just won't exist. This allows us to do easy circular reference detection.\n            circular: 'ignore'\n          }\n        }).then(function (dereferenced) {\n          var circularRefs = [];\n          if (parser.$refs.circular) {\n            circularRefs = parser.$refs.circularRefs.map(function (pointer) {\n              // The circular $refs that are coming out of `json-schema-ref-parser` are prefixed\n              // with the schema path (file path, url, whatever) that the schema exists in. Because\n              // we don't care about this information for this reporting mechanism, and only the\n              // $ref pointer, we're removing it.\n              return \"#\".concat(pointer.split('#')[1]);\n            });\n          }\n          _this.api = dereferenced;\n          _this.promises = promises;\n          _this.dereferencing = {\n            processing: false,\n            complete: true,\n            circularRefs: circularRefs\n          };\n          // Used for debugging that dereferencing promise awaiting works.\n          if (opts.cb) {\n            opts.cb();\n          }\n        }).then(function () {\n          return _this.promises.map(function (deferred) {\n            return deferred.resolve();\n          });\n        })];\n      });\n    });\n  };\n  return Oas;\n}();\nexports[\"default\"] = Oas;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","op","TypeError","pop","push","__importDefault","exports","utils","Webhook","Callback","Operation","json_schema_ref_parser_1","require","path_to_regexp_1","get_auth_1","get_user_variable_1","operation_1","utils_1","SERVER_VARIABLE_REGEX","ensureProtocol","url","match","concat","stripTrailingSlash","slice","normalizedUrl","api","selected","exampleDotCom","servers","Error","startsWith","urlWithOrigin","URL","pathname","href","transformUrlIntoRegex","replace","normalizePath","path","str","args","_i","split","generatePathMatches","paths","pathName","origin","prunedPathName","keys","map","cleanedPath","matchResult","matchStatement","decode","decodeURIComponent","err","slugs","params","forEach","param","nonNormalizedPath","operation","filter","Boolean","filterPathMethods","pathMatches","targetMethod","regExp","pathToRegexp","captures","r","exec","method","toUpperCase","findTargetPath","minCount","selection","paramCount","Oas","oas","user","promises","dereferencing","processing","complete","circularRefs","init","getVersion","openapi","getDefinition","variables","replaceUrl","trim","defaultVariables","_this","defaults","key","splitUrl","part","isVariable","type","variable","description","splitVariables","baseUrl","matchedServer","server","rgx","found","RegExp","Array","from","matchAll","original","userVariable","data","isArray","opts","_a","_b","_c","_d","parameters","isWebhook","webhooks","findOperationMatches","hostname","originRegExp","targetServer","find","hostnameRegExp_1","matchedServerAndPath","annotatedPaths","findOperation","matches","findOperationWithoutMethod","getOperation","getAuth","selectedApp","components","securitySchemes","getPaths","findSchemaDefinition","$ref","supportedMethods","has","getWebhooks","id","getTags","setIfMissing","allTags","Set","entries","operations","values","tags","add","tag","name","hasExtension","extension","getExtension","getCircularReferences","dereference","preserveRefAsJSONSchemaTitle","parser","schemas","schemaName","title","external","circular","dereferenced","$refs","pointer","cb","deferred"],"sources":["/Users/pranavsrinivasan/Documents/VSCode/aividgen/client/.api/apis/aivideoapi/node_modules/oas/dist/index.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.utils = exports.Webhook = exports.Callback = exports.Operation = void 0;\nvar json_schema_ref_parser_1 = __importDefault(require(\"@readme/json-schema-ref-parser\"));\nvar path_to_regexp_1 = require(\"path-to-regexp\");\nvar get_auth_1 = __importDefault(require(\"./lib/get-auth\"));\nvar get_user_variable_1 = __importDefault(require(\"./lib/get-user-variable\"));\nvar operation_1 = __importStar(require(\"./operation\"));\nexports.Operation = operation_1[\"default\"];\nexports.Callback = operation_1.Callback;\nexports.Webhook = operation_1.Webhook;\nvar utils_1 = __importStar(require(\"./utils\"));\nexports.utils = utils_1[\"default\"];\nvar SERVER_VARIABLE_REGEX = /{([-_a-zA-Z0-9:.[\\]]+)}/g;\nfunction ensureProtocol(url) {\n    // Add protocol to urls starting with // e.g. //example.com\n    // This is because httpsnippet throws a HARError when it doesnt have a protocol\n    if (url.match(/^\\/\\//)) {\n        return \"https:\".concat(url);\n    }\n    // Add protocol to urls with no // within them\n    // This is because httpsnippet throws a HARError when it doesnt have a protocol\n    if (!url.match(/\\/\\//)) {\n        return \"https://\".concat(url);\n    }\n    return url;\n}\nfunction stripTrailingSlash(url) {\n    if (url[url.length - 1] === '/') {\n        return url.slice(0, -1);\n    }\n    return url;\n}\n/**\n * Normalize a OpenAPI server URL by ensuring that it has a proper HTTP protocol and doesn't have a\n * trailing slash.\n *\n * @param api The API definition that we're processing.\n * @param selected The index of the `servers` array in the API definition that we want to normalize.\n */\nfunction normalizedUrl(api, selected) {\n    var exampleDotCom = 'https://example.com';\n    var url;\n    try {\n        url = api.servers[selected].url;\n        // This is to catch the case where servers = [{}]\n        if (!url)\n            throw new Error('no url');\n        // Stripping the '/' off the end\n        url = stripTrailingSlash(url);\n        // Check if the URL is just a path a missing an origin, for example `/api/v3`. If so, then make\n        // `example.com` the origin to avoid it becoming something invalid like `https:///api/v3`.\n        // RM-1044\n        if (url.startsWith('/') && !url.startsWith('//')) {\n            var urlWithOrigin = new URL(exampleDotCom);\n            urlWithOrigin.pathname = url;\n            url = urlWithOrigin.href;\n        }\n    }\n    catch (e) {\n        url = exampleDotCom;\n    }\n    return ensureProtocol(url);\n}\n/**\n * With a URL that may contain server variables, transform those server variables into regex that\n * we can query against.\n *\n * For example, when given `https://{region}.node.example.com/v14` this will return back:\n *\n *    https://([-_a-zA-Z0-9:.[\\\\]]+).node.example.com/v14\n *\n * @param url URL to transform\n */\nfunction transformUrlIntoRegex(url) {\n    return stripTrailingSlash(url.replace(SERVER_VARIABLE_REGEX, '([-_a-zA-Z0-9:.[\\\\]]+)'));\n}\n/**\n * Normalize a path so that we can use it with `path-to-regexp` to do operation lookups.\n *\n * @param path Path to normalize.\n */\nfunction normalizePath(path) {\n    return (path\n        // This regex transforms `{pathParam}` into `:pathParam` so we can regex against it. We're\n        // also handling quirks here like if there's an optional proceeding or trailing curly bracket\n        // (`{{pathParam}` or `{pathParam}}`) as any unescaped curlys, which would be present in\n        // `:pathParam}`, will throw a regex exception.\n        .replace(/({?){(.*?)}(}?)/g, function (str) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        // If a path contains a path parameter with hyphens, like `:dlc-release`, when it's regexd\n        // with `path-to-regexp` it match against the `:dlc` portion of the parameter, breaking all\n        // matching against the full path.\n        //\n        // For example on `/games/:game/dlc/:dlc-release` the regex that's actually used to search\n        // against a path like `/games/destiny-2/dlc/witch-queen` is the following:\n        //    /^\\/games(?:\\/([^\\/#\\?]+?))\\/dlc(?:\\/([^\\/#\\?]+?))-release[\\/#\\?]?$/i\n        //\n        // However if `:dlc-release` is rewritten to `:dlcrelease` we end up with a functional\n        // regex: /^\\/games(?:\\/([^\\/#\\?]+?))\\/dlc(?:\\/([^\\/#\\?]+?))[\\/#\\?]?$/i.\n        return \":\".concat(args[1].replace('-', ''));\n    })\n        // In addition to transforming `{pathParam}` into `:pathParam` we also need to escape cases\n        // where a non-variabled colon is next to a variabled-colon because if we don't then\n        // `path-to-regexp` won't be able to correct identify where the variable starts.\n        //\n        // For example if the URL is `/post/:param1::param2` we'll be escaping it to\n        // `/post/:param1\\::param2`.\n        .replace(/::/, '\\\\::')\n        // We also need to escape question marks too because they're treated as regex modifiers.\n        .split('?')[0]);\n}\n/**\n * Generate path matches for a given path and origin on a set of OpenAPI path objects.\n *\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#pathsObject}\n * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#pathsObject}\n * @param paths The OpenAPI Paths Object to process.\n * @param pathName Path to look for a match.\n * @param origin The origin that we're matching against.\n */\nfunction generatePathMatches(paths, pathName, origin) {\n    var prunedPathName = pathName.split('?')[0];\n    return Object.keys(paths)\n        .map(function (path) {\n        var cleanedPath = normalizePath(path);\n        var matchResult;\n        try {\n            var matchStatement = (0, path_to_regexp_1.match)(cleanedPath, { decode: decodeURIComponent });\n            matchResult = matchStatement(prunedPathName);\n        }\n        catch (err) {\n            // If path matching fails for whatever reason (maybe they have a malformed path parameter)\n            // then we shouldn't also fail.\n            return;\n        }\n        var slugs = {};\n        if (matchResult && Object.keys(matchResult.params).length) {\n            Object.keys(matchResult.params).forEach(function (param) {\n                slugs[\":\".concat(param)] = matchResult.params[param];\n            });\n        }\n        // eslint-disable-next-line consistent-return\n        return {\n            url: {\n                origin: origin,\n                path: cleanedPath.replace(/\\\\::/, '::'),\n                nonNormalizedPath: path,\n                slugs: slugs\n            },\n            operation: paths[path],\n            match: matchResult\n        };\n    })\n        .filter(Boolean)\n        .filter(function (p) { return p.match; });\n}\n/**\n * @param pathMatches Array of path matches to filter down.\n * @param targetMethod HTTP method to look for.\n * @returns Filtered down path matches.\n */\nfunction filterPathMethods(pathMatches, targetMethod) {\n    var regExp = (0, path_to_regexp_1.pathToRegexp)(targetMethod);\n    return pathMatches\n        .map(function (p) {\n        var captures = Object.keys(p.operation).filter(function (r) { return regExp.exec(r); });\n        if (captures.length) {\n            var method = captures[0];\n            p.url.method = method.toUpperCase();\n            return {\n                url: p.url,\n                operation: p.operation[method]\n            };\n        }\n        return false;\n    })\n        .filter(Boolean);\n}\n/**\n * @param pathMatches URL and PathsObject matches to narrow down to find a target path.\n * @returns An object containing matches that were discovered in the API definition.\n */\nfunction findTargetPath(pathMatches) {\n    var minCount = Object.keys(pathMatches[0].url.slugs).length;\n    var operation;\n    for (var m = 0; m < pathMatches.length; m += 1) {\n        var selection = pathMatches[m];\n        var paramCount = Object.keys(selection.url.slugs).length;\n        if (paramCount <= minCount) {\n            minCount = paramCount;\n            operation = selection;\n        }\n    }\n    return operation;\n}\nvar Oas = /** @class */ (function () {\n    /**\n     * @param oas An OpenAPI definition.\n     * @param user The information about a user that we should use when pulling auth tokens from\n     *    security schemes.\n     */\n    function Oas(oas, user) {\n        // @todo throw an exception here instead of allowing an empty oas\n        this.api = oas;\n        this.user = user || {};\n        this.promises = [];\n        this.dereferencing = {\n            processing: false,\n            complete: false,\n            circularRefs: []\n        };\n    }\n    /**\n     * This will initialize a new instance of the `Oas` class. This method is useful if you're using\n     * Typescript and are attempting to supply an untyped JSON object into `Oas` as it will force-type\n     * that object to an `OASDocument` for you.\n     *\n     * @param oas An OpenAPI definition.\n     * @param user The information about a user that we should use when pulling auth tokens from\n     *    security schemes.\n     */\n    Oas.init = function (oas, user) {\n        return new Oas(oas, user);\n    };\n    /**\n     * Retrieve the OpenAPI version that this API definition is targeted for.\n     */\n    Oas.prototype.getVersion = function () {\n        if (this.api.openapi) {\n            return this.api.openapi;\n        }\n        throw new Error('Unable to recognize what specification version this API definition conforms to.');\n    };\n    /**\n     * Retrieve the current OpenAPI API Definition.\n     *\n     */\n    Oas.prototype.getDefinition = function () {\n        return this.api;\n    };\n    Oas.prototype.url = function (selected, variables) {\n        if (selected === void 0) { selected = 0; }\n        var url = normalizedUrl(this.api, selected);\n        return this.replaceUrl(url, variables || this.variables(selected)).trim();\n    };\n    Oas.prototype.variables = function (selected) {\n        if (selected === void 0) { selected = 0; }\n        var variables;\n        try {\n            variables = this.api.servers[selected].variables;\n            if (!variables)\n                throw new Error('no variables');\n        }\n        catch (e) {\n            variables = {};\n        }\n        return variables;\n    };\n    Oas.prototype.defaultVariables = function (selected) {\n        var _this = this;\n        if (selected === void 0) { selected = 0; }\n        var variables = this.variables(selected);\n        var defaults = {};\n        Object.keys(variables).forEach(function (key) {\n            defaults[key] = (0, get_user_variable_1[\"default\"])(_this.user, key) || variables[key][\"default\"] || '';\n        });\n        return defaults;\n    };\n    Oas.prototype.splitUrl = function (selected) {\n        if (selected === void 0) { selected = 0; }\n        var url = normalizedUrl(this.api, selected);\n        var variables = this.variables(selected);\n        return url\n            .split(/({.+?})/)\n            .filter(Boolean)\n            .map(function (part, i) {\n            var isVariable = part.match(/[{}]/);\n            var value = part.replace(/[{}]/g, '');\n            // To ensure unique keys, we're going to create a key\n            // with the value concatenated to its index.\n            var key = \"\".concat(value, \"-\").concat(i);\n            if (!isVariable) {\n                return {\n                    type: 'text',\n                    value: value,\n                    key: key\n                };\n            }\n            var variable = variables === null || variables === void 0 ? void 0 : variables[value];\n            return {\n                type: 'variable',\n                value: value,\n                key: key,\n                description: variable === null || variable === void 0 ? void 0 : variable.description,\n                \"enum\": variable === null || variable === void 0 ? void 0 : variable[\"enum\"]\n            };\n        });\n    };\n    /**\n     * With a fully composed server URL, run through our list of known OAS servers and return back\n     * which server URL was selected along with any contained server variables split out.\n     *\n     * For example, if you have an OAS server URL of `https://{name}.example.com:{port}/{basePath}`,\n     * and pass in `https://buster.example.com:3000/pet` to this function, you'll get back the\n     * following:\n     *\n     *    { selected: 0, variables: { name: 'buster', port: 3000, basePath: 'pet' } }\n     *\n     * Re-supplying this data to `oas.url()` should return the same URL you passed into this method.\n     *\n     * @param baseUrl A given URL to extract server variables out of.\n     */\n    Oas.prototype.splitVariables = function (baseUrl) {\n        var matchedServer = (this.api.servers || [])\n            .map(function (server, i) {\n            var rgx = transformUrlIntoRegex(server.url);\n            var found = new RegExp(rgx).exec(baseUrl);\n            if (!found) {\n                return false;\n            }\n            // While it'd be nice to use named regex groups to extract path parameters from the URL and\n            // match them up with the variables that we have present in it, JS unfortunately doesn't\n            // support having the groups duplicated. So instead of doing that we need to re-regex the\n            // server URL, this time splitting on the path parameters -- this way we'll be able to\n            // extract the parameter names and match them up with the matched server that we obtained\n            // above.\n            var variables = {};\n            Array.from(server.url.matchAll(SERVER_VARIABLE_REGEX)).forEach(function (variable, y) {\n                variables[variable[1]] = found[y + 1];\n            });\n            return {\n                selected: i,\n                variables: variables\n            };\n        })\n            .filter(Boolean);\n        return matchedServer.length ? matchedServer[0] : false;\n    };\n    /**\n     * Replace templated variables with supplied data in a given URL.\n     *\n     * There are a couple ways that this will utilize variable data:\n     *\n     *  - If data is stored in `this.user` and it matches up with the variable name in the URL user\n     *    data will always take priority. See `getUserVariable` for some more information on how this\n     *    data is pulled from `this.user`.\n     *  - Supplying a `variables` object. This incoming `variables` object can be two formats:\n     *    `{ variableName: { default: 'value' } }` and `{ variableName: 'value' }`. If the former is\n     *    present, that will take prescendence over the latter.\n     *\n     * If no variables supplied match up with the template name, the template name will instead be\n     * used as the variable data.\n     *\n     * @param url A URL to swap variables into.\n     * @param variables An object containing variables to swap into the URL.\n     */\n    Oas.prototype.replaceUrl = function (url, variables) {\n        var _this = this;\n        if (variables === void 0) { variables = {}; }\n        // When we're constructing URLs, server URLs with trailing slashes cause problems with doing\n        // lookups, so if we have one here on, slice it off.\n        return stripTrailingSlash(url.replace(SERVER_VARIABLE_REGEX, function (original, key) {\n            var userVariable = (0, get_user_variable_1[\"default\"])(_this.user, key);\n            if (userVariable) {\n                return userVariable;\n            }\n            if (key in variables) {\n                var data = variables[key];\n                if (typeof data === 'object') {\n                    if (!Array.isArray(data) && data !== null && 'default' in data) {\n                        return data[\"default\"];\n                    }\n                }\n                else {\n                    return data;\n                }\n            }\n            return original;\n        }));\n    };\n    /**\n     * Retrieve an Operation of Webhook class instance for a given path and method.\n     *\n     * @param path Path to lookup and retrieve.\n     * @param method HTTP Method to retrieve on the path.\n     */\n    Oas.prototype.operation = function (path, method, opts) {\n        var _a, _b, _c, _d;\n        if (opts === void 0) { opts = {}; }\n        // If we're unable to locate an operation for this path+method combination within the API\n        // definition, we should still set an empty schema on the operation in the `Operation` class\n        // because if we don't trying to use any of the accessors on that class are going to fail as\n        // `schema` will be `undefined`.\n        var operation = {\n            parameters: []\n        };\n        if (opts.isWebhook) {\n            var api = this.api;\n            // Typecasting this to a `PathsObject` because we don't have `$ref` pointers here.\n            if ((_a = api === null || api === void 0 ? void 0 : api.webhooks[path]) === null || _a === void 0 ? void 0 : _a[method]) {\n                operation = api.webhooks[path][method];\n                return new operation_1.Webhook(api, path, method, operation);\n            }\n        }\n        if ((_d = (_c = (_b = this === null || this === void 0 ? void 0 : this.api) === null || _b === void 0 ? void 0 : _b.paths) === null || _c === void 0 ? void 0 : _c[path]) === null || _d === void 0 ? void 0 : _d[method]) {\n            operation = this.api.paths[path][method];\n        }\n        return new operation_1[\"default\"](this.api, path, method, operation);\n    };\n    Oas.prototype.findOperationMatches = function (url) {\n        var _a;\n        var _this = this;\n        var _b = new URL(url), origin = _b.origin, hostname = _b.hostname;\n        var originRegExp = new RegExp(origin, 'i');\n        var _c = this.api, servers = _c.servers, paths = _c.paths;\n        var pathName;\n        var targetServer;\n        var matchedServer;\n        if (!servers || !servers.length) {\n            // If this API definition doesn't have any servers set up let's treat it as if it were\n            // https://example.com because that's the default origin we add in `normalizedUrl` under the\n            // same circumstances. Without this we won't be able to match paths within what is otherwise\n            // a valid OpenAPI definition.\n            matchedServer = {\n                url: 'https://example.com'\n            };\n        }\n        else {\n            matchedServer = servers.find(function (s) { return originRegExp.exec(_this.replaceUrl(s.url, s.variables || {})); });\n            if (!matchedServer) {\n                var hostnameRegExp_1 = new RegExp(hostname);\n                matchedServer = servers.find(function (s) { return hostnameRegExp_1.exec(_this.replaceUrl(s.url, s.variables || {})); });\n            }\n        }\n        // If we **still** haven't found a matching server, then the OAS server URL might have server\n        // variables and we should loosen it up with regex to try to discover a matching path.\n        //\n        // For example if an OAS has `https://{region}.node.example.com/v14` set as its server URL, and\n        // the `this.user` object has a `region` value of `us`, if we're trying to locate an operation\n        // for https://eu.node.example.com/v14/api/esm we won't be able to because normally the users\n        // `region` of `us` will be transposed in and we'll be trying to locate `eu.node.example.com`\n        // in `us.node.example.com` -- which won't work.\n        //\n        // So what this does is transform `https://{region}.node.example.com/v14` into\n        // `https://([-_a-zA-Z0-9[\\\\]]+).node.example.com/v14`, and from there we'll be able to match\n        // https://eu.node.example.com/v14/api/esm and ultimately find the operation matches for\n        // `/api/esm`.\n        if (!matchedServer) {\n            var matchedServerAndPath = servers\n                .map(function (server) {\n                var rgx = transformUrlIntoRegex(server.url);\n                var found = new RegExp(rgx).exec(url);\n                if (!found) {\n                    return false;\n                }\n                return {\n                    matchedServer: server,\n                    pathName: url.split(new RegExp(rgx)).slice(-1).pop()\n                };\n            })\n                .filter(Boolean);\n            if (!matchedServerAndPath.length) {\n                return undefined;\n            }\n            pathName = matchedServerAndPath[0].pathName;\n            targetServer = __assign({}, matchedServerAndPath[0].matchedServer);\n        }\n        else {\n            // Instead of setting `url` directly against `matchedServer` we need to set it to an\n            // intermediary object as directly modifying `matchedServer.url` will in turn update\n            // `this.servers[idx].url` which we absolutely do not want to happen.\n            targetServer = __assign(__assign({}, matchedServer), { url: this.replaceUrl(matchedServer.url, matchedServer.variables || {}) });\n            _a = url.split(new RegExp(targetServer.url, 'i')), pathName = _a[1];\n        }\n        if (pathName === undefined)\n            return undefined;\n        if (pathName === '')\n            pathName = '/';\n        var annotatedPaths = generatePathMatches(paths, pathName, targetServer.url);\n        if (!annotatedPaths.length)\n            return undefined;\n        return annotatedPaths;\n    };\n    /**\n     * Discover an operation in an OAS from a fully-formed URL and HTTP method. Will return an object\n     * containing a `url` object and another one for `operation`. This differs from `getOperation()`\n     * in that it does not return an instance of the `Operation` class.\n     *\n     * @param url A full URL to look up.\n     * @param method The cooresponding HTTP method to look up.\n     */\n    Oas.prototype.findOperation = function (url, method) {\n        var annotatedPaths = this.findOperationMatches(url);\n        if (!annotatedPaths) {\n            return undefined;\n        }\n        var matches = filterPathMethods(annotatedPaths, method);\n        if (!matches.length)\n            return undefined;\n        return findTargetPath(matches);\n    };\n    /**\n     * Discover an operation in an OAS from a fully-formed URL without an HTTP method. Will return an\n     * object containing a `url` object and another one for `operation`.\n     *\n     * @param url A full URL to look up.\n     */\n    Oas.prototype.findOperationWithoutMethod = function (url) {\n        var annotatedPaths = this.findOperationMatches(url);\n        if (!annotatedPaths) {\n            return undefined;\n        }\n        return findTargetPath(annotatedPaths);\n    };\n    /**\n     * Retrieve an operation in an OAS from a fully-formed URL and HTTP method. Differs from\n     * `findOperation` in that while this method will return an `Operation` instance,\n     * `findOperation()` does not.\n     *\n     * @param url A full URL to look up.\n     * @param method The cooresponding HTTP method to look up.\n     */\n    Oas.prototype.getOperation = function (url, method) {\n        var op = this.findOperation(url, method);\n        if (op === undefined) {\n            return undefined;\n        }\n        return this.operation(op.url.nonNormalizedPath, method);\n    };\n    /**\n     * With an object of user information, retrieve the appropriate API auth keys from the current\n     * OAS definition.\n     *\n     * @see {@link https://docs.readme.com/docs/passing-data-to-jwt}\n     * @param user User\n     * @param selectedApp The user app to retrieve an auth key for.\n     */\n    Oas.prototype.getAuth = function (user, selectedApp) {\n        var _a, _b;\n        if (!((_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.components) === null || _b === void 0 ? void 0 : _b.securitySchemes)) {\n            return {};\n        }\n        return (0, get_auth_1[\"default\"])(this.api, user, selectedApp);\n    };\n    /**\n     * Returns the `paths` object that exists in this API definition but with every `method` mapped\n     * to an instance of the `Operation` class.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n     */\n    Oas.prototype.getPaths = function () {\n        var _this = this;\n        /**\n         * Because a path doesn't need to contain a keyed-object of HTTP methods, we should exclude\n         * anything from within the paths object that isn't a known HTTP method.\n         *\n         * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#fixed-fields-7}\n         * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#fixed-fields-7}\n         */\n        var paths = {};\n        Object.keys(this.api.paths ? this.api.paths : []).forEach(function (path) {\n            // If this is a specification extension then we should ignore it.\n            if (path.startsWith('x-')) {\n                return;\n            }\n            paths[path] = {};\n            // Though this library is generally unaware of `$ref` pointers we're making a singular\n            // exception with this accessor out of convenience.\n            if ('$ref' in _this.api.paths[path]) {\n                _this.api.paths[path] = utils_1[\"default\"].findSchemaDefinition(_this.api.paths[path].$ref, _this.api);\n            }\n            Object.keys(_this.api.paths[path]).forEach(function (method) {\n                if (!utils_1.supportedMethods.has(method))\n                    return;\n                paths[path][method] = _this.operation(path, method);\n            });\n        });\n        return paths;\n    };\n    /**\n     * Returns the `webhooks` object that exists in this API definition but with every `method`\n     * mapped to an instance of the `Webhook` class.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n     */\n    Oas.prototype.getWebhooks = function () {\n        var _this = this;\n        var webhooks = {};\n        var api = this.api;\n        Object.keys(api.webhooks ? api.webhooks : []).forEach(function (id) {\n            webhooks[id] = {};\n            Object.keys(api.webhooks[id]).forEach(function (method) {\n                webhooks[id][method] = _this.operation(id, method, { isWebhook: true });\n            });\n        });\n        return webhooks;\n    };\n    /**\n     * Return an array of all tag names that exist on this API definition.\n     *\n     * Note: This method right now does **not** factor in webhooks that have tags.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md#oasObject}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#openapi-object}\n     * @param setIfMissing If a tag is not present on an operation that operations path will be added\n     *    into the list of tags returned.\n     */\n    Oas.prototype.getTags = function (setIfMissing) {\n        if (setIfMissing === void 0) { setIfMissing = false; }\n        var allTags = new Set();\n        Object.entries(this.getPaths()).forEach(function (_a) {\n            var path = _a[0], operations = _a[1];\n            Object.values(operations).forEach(function (operation) {\n                var tags = operation.getTags();\n                if (setIfMissing && !tags.length) {\n                    allTags.add(path);\n                    return;\n                }\n                tags.forEach(function (tag) {\n                    allTags.add(tag.name);\n                });\n            });\n        });\n        return Array.from(allTags);\n    };\n    /**\n     * Determine if a given a custom specification extension exists within the API definition.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#specificationExtensions}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#specificationExtensions}\n     * @param extension Specification extension to lookup.\n     */\n    Oas.prototype.hasExtension = function (extension) {\n        return Boolean(this.api && extension in this.api);\n    };\n    /**\n     * Retrieve a custom specification extension off of the API definition.\n     *\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md#specificationExtensions}\n     * @see {@link https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#specificationExtensions}\n     * @param extension Specification extension to lookup.\n     */\n    Oas.prototype.getExtension = function (extension) {\n        var _a;\n        return (_a = this.api) === null || _a === void 0 ? void 0 : _a[extension];\n    };\n    /**\n     * Retrieve any circular `$ref` pointers that maybe present within the API definition.\n     *\n     * This method requires that you first dereference the definition.\n     *\n     * @see Oas.dereference\n     */\n    Oas.prototype.getCircularReferences = function () {\n        if (!this.dereferencing.complete) {\n            throw new Error('#dereference() must be called first in order for this method to obtain circular references.');\n        }\n        return this.dereferencing.circularRefs;\n    };\n    /**\n     * Dereference the current OAS definition so it can be parsed free of worries of `$ref` schemas\n     * and circular structures.\n     *\n     */\n    Oas.prototype.dereference = function (opts) {\n        if (opts === void 0) { opts = { preserveRefAsJSONSchemaTitle: false }; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, api, promises, parser;\n            var _this = this;\n            return __generator(this, function (_b) {\n                if (this.dereferencing.complete) {\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            resolve(true);\n                        })];\n                }\n                if (this.dereferencing.processing) {\n                    return [2 /*return*/, new Promise(function (resolve, reject) {\n                            _this.promises.push({ resolve: resolve, reject: reject });\n                        })];\n                }\n                this.dereferencing.processing = true;\n                _a = this, api = _a.api, promises = _a.promises;\n                // Because referencing will eliminate any lineage back to the original `$ref`, information that\n                // we might need at some point, we should run through all available component schemas and denote\n                // what their name is so that when dereferencing happens below those names will be preserved.\n                if (api && api.components && api.components.schemas && typeof api.components.schemas === 'object') {\n                    Object.keys(api.components.schemas).forEach(function (schemaName) {\n                        if (opts.preserveRefAsJSONSchemaTitle) {\n                            // This may result in some data loss if there's already a `title` present, but in the case\n                            // where we want to generate code for the API definition (see http://npm.im/api), we'd\n                            // prefer to retain original reference name as a title for any generated types.\n                            api.components.schemas[schemaName].title = schemaName;\n                        }\n                        api.components.schemas[schemaName]['x-readme-ref-name'] = schemaName;\n                    });\n                }\n                parser = new json_schema_ref_parser_1[\"default\"]();\n                return [2 /*return*/, parser\n                        .dereference(api || {}, {\n                        resolve: {\n                            // We shouldn't be resolving external pointers at this point so just ignore them.\n                            external: false\n                        },\n                        dereference: {\n                            // If circular `$refs` are ignored they'll remain in the OAS as `$ref: String`, otherwise\n                            // `$ref‘ just won't exist. This allows us to do easy circular reference detection.\n                            circular: 'ignore'\n                        }\n                    })\n                        .then(function (dereferenced) {\n                        var circularRefs = [];\n                        if (parser.$refs.circular) {\n                            circularRefs = parser.$refs.circularRefs.map(function (pointer) {\n                                // The circular $refs that are coming out of `json-schema-ref-parser` are prefixed\n                                // with the schema path (file path, url, whatever) that the schema exists in. Because\n                                // we don't care about this information for this reporting mechanism, and only the\n                                // $ref pointer, we're removing it.\n                                return \"#\".concat(pointer.split('#')[1]);\n                            });\n                        }\n                        _this.api = dereferenced;\n                        _this.promises = promises;\n                        _this.dereferencing = {\n                            processing: false,\n                            complete: true,\n                            circularRefs: circularRefs\n                        };\n                        // Used for debugging that dereferencing promise awaiting works.\n                        if (opts.cb) {\n                            opts.cb();\n                        }\n                    })\n                        .then(function () {\n                        return _this.promises.map(function (deferred) { return deferred.resolve(); });\n                    })];\n            });\n        });\n    };\n    return Oas;\n}());\nexports[\"default\"] = Oas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}